<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>VASAVA TRANSLATIONS — Chapters 490–586</title>
<style>
  :root{
    --bg: #0a0a0a;
    --panel: #0f1113;
    --muted: #9aa3b2;
    --text: #e6eef8;
    --accent: #ffffff;
    --card-radius: 12px;
    --gap: 20px;
    --max-width: 980px;
    --shadow: 0 10px 30px rgba(2,6,23,0.6);
  }
  /* light theme (optional) */
  [data-theme="light"]{
    --bg: #fbfbfc;
    --panel: #ffffff;
    --muted: #6b7280;
    --text: #0a0a0a;
    --accent: #000000;
    --shadow: 0 8px 20px rgba(12,18,28,0.06);
  }

  html,body{height:100%;margin:0}
  body{
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: linear-gradient(180deg, var(--bg), rgba(0,0,0,0.02));
    color:var(--text);
    -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    display:flex;align-items:flex-start;justify-content:center;padding:36px;
  }

  .wrap{width:100%;max-width:var(--max-width);display:flex;flex-direction:column;gap:var(--gap)}

  /* Title box */
  .title-box{
    background:var(--panel);
    border-radius:var(--card-radius);
    padding:18px 22px;
    box-shadow:var(--shadow);
    border: 1px solid rgba(255,255,255,0.03);
    text-align:center;
  }
  .title-box h1{margin:0;font-size:1.125rem;letter-spacing:1px;font-weight:700;text-transform:uppercase}
  .title-box p{margin:6px 0 0;color:var(--muted);font-size:0.9rem}

  /* Main panel */
  .panel{
    background:var(--panel);
    border-radius:var(--card-radius);
    padding:20px;
    box-shadow:var(--shadow);
    border:1px solid rgba(255,255,255,0.03);
  }
  header{display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:14px}
  .meta{display:flex;flex-direction:column}
  .meta h2{margin:0;font-size:0.95rem;font-weight:700}
  .meta .muted{color:var(--muted);font-size:0.9rem;margin-top:4px}

  /* controls */
  .controls{display:flex;align-items:center;gap:12px}
  .theme-toggle{
    width:56px;height:34px;border-radius:999px;padding:4px;border:1px solid rgba(255,255,255,0.04);
    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.02));
    display:inline-flex;align-items:center;cursor:pointer;position:relative;
    transition:transform .18s ease;
  }
  .theme-orb{
    width:26px;height:26px;border-radius:50%;background:var(--accent);box-shadow:0 6px 14px rgba(0,0,0,0.35);
    transform:translateX(0);transition:transform .28s cubic-bezier(.2,.9,.3,1), background .18s ease;
  }
  [data-theme="light"] .theme-orb{background:var(--accent);box-shadow:0 6px 14px rgba(12,18,28,0.06)}
  .theme-toggle[data-mode="dark"] .theme-orb{transform:translateX(22px); background:linear-gradient(180deg,#ffd86b,#ffb86b)}

  /* Works row */
  .works{display:flex;align-items:center;gap:14px;margin-bottom:8px}
  .works .label{color:var(--muted);font-weight:600;font-size:0.92rem}
  .ofpv-btn{
    padding:8px 12px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);
    background:transparent;color:var(--text);font-weight:700;cursor:pointer;
  }
  .ofpv-btn:focus,.ofpv-btn:hover{outline:none;transform:translateY(-3px);box-shadow:0 10px 30px rgba(0,0,0,0.35)}

  /* chapters grid */
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:12px;margin-top:12px}
  .item{
    padding:12px;border-radius:10px;text-align:center;text-decoration:none;color:var(--text);
    background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.02));
    border:1px solid rgba(255,255,255,0.02);font-weight:600;
    transition:transform .16s ease, box-shadow .16s ease;
  }
  .item:hover,.item:focus{transform:translateY(-6px);box-shadow:0 14px 30px rgba(0,0,0,0.5)}

  .note{
    margin-top:18px;padding:12px;border-radius:10px;color:var(--muted);font-size:0.95rem;
    border:1px dashed rgba(255,255,255,0.03);background:transparent;
  }

  /* accessibility focus */
  :focus{outline:none}
  .focus-ring{box-shadow:0 0 0 4px rgba(255,255,255,0.04) !important}

  /* responsive adjustments */
  @media (max-width:620px){
    .grid{grid-template-columns:repeat(auto-fill,minmax(120px,1fr))}
    .title-box h1{font-size:1rem}
  }
</style>
</head>
<body data-theme="dark">
  <div class="wrap" role="main">

    <div class="title-box" aria-hidden="false">
      <h1>VASAVA TRANSLATIONS</h1>
      <p>Reader index · Chapters 490–586</p>
    </div>

    <main class="panel" aria-label="Vasava translations panel">
      <header>
        <div class="meta">
          <h2>Reader Index</h2>
          <div class="muted">Chapters 490–586</div>
        </div>

        <div class="controls" role="group" aria-label="Header controls">
          <button id="themeToggle" class="theme-toggle" aria-pressed="true" aria-label="Toggle theme" data-mode="dark" title="Toggle theme">
            <span class="theme-orb" aria-hidden="true"></span>
          </button>
        </div>
      </header>

      <div class="works" aria-label="Works">
        <div class="label">Works</div>
        <button id="ofpvBtn" class="ofpv-btn" aria-controls="chapters" aria-expanded="false">ofpv chapters 490–586</button>
      </div>

      <nav id="chapters" aria-label="Chapters" hidden>
        <div class="grid" id="list" role="list" aria-live="polite"></div>
      </nav>

      <div class="note" aria-live="polite">
        I update the chapters as I read them. Everything is free. Visit <strong>r/ofpv</strong> for queries or suggestions.
      </div>
    </main>
  </div>

<script>
  const root = document.documentElement;
  const themeToggle = document.getElementById('themeToggle');
  const stored = localStorage.getItem('vasava-theme') || 'dark';
  function applyTheme(mode){
    if(mode === 'light') root.setAttribute('data-theme','light'); else root.removeAttribute('data-theme');
    themeToggle.setAttribute('data-mode', mode === 'dark' ? 'dark' : 'light');
    themeToggle.setAttribute('aria-pressed', String(mode === 'dark'));
    localStorage.setItem('vasava-theme', mode);
  }
  themeToggle.addEventListener('click', ()=>{
    const nowDark = document.documentElement.hasAttribute('data-theme') === false;
    applyTheme(nowDark ? 'light' : 'dark');
  });
  applyTheme(stored);

  (function buildChapters(){
    const start=490,end=586;
    const list=document.getElementById('list');
    const frag=document.createDocumentFragment();
    for(let i=start;i<=end;i++){
      const a=document.createElement('a');
      a.className='item';
      a.href=`chapters/reader.html?n=${i}`;
      a.textContent=`Chapter ${i}`;
      a.setAttribute('role','listitem');
      a.setAttribute('tabindex','-1');
      frag.appendChild(a);
    }
    list.appendChild(frag);
  })();

  const ofpvBtn = document.getElementById('ofpvBtn');
  const chapters = document.getElementById('chapters');
  function setItemsTabIndex(val){
    document.querySelectorAll('#list .item').forEach(el=> el.setAttribute('tabindex', String(val)));
  }
  ofpvBtn.addEventListener('click', ()=>{
    const hidden = chapters.hasAttribute('hidden');
    if(hidden){
      chapters.removeAttribute('hidden');
      ofpvBtn.setAttribute('aria-expanded','true');
      ofpvBtn.textContent = 'Hide chapters 490–586';
      setItemsTabIndex(0);
      const first = document.querySelector('#list .item');
      if(first) first.focus();
    } else {
      chapters.setAttribute('hidden','');
      ofpvBtn.setAttribute('aria-expanded','false');
      ofpvBtn.textContent = 'ofpv chapters 490–586';
      setItemsTabIndex(-1);
      ofpvBtn.focus();
    }
  });

  // accessible visible focus
  document.addEventListener('keydown', e => { if(e.key === 'Tab') document.body.classList.add('user-tabbing'); });
  document.addEventListener('mousedown', ()=> document.body.classList.remove('user-tabbing'));
  document.addEventListener('focusin', e => {
    if(document.body.classList.contains('user-tabbing')) e.target.classList && e.target.classList.add('focus-ring');
  });
  document.addEventListener('focusout', e => { e.target.classList && e.target.classList.remove('focus-ring'); });
</script>
</body>
</html>
