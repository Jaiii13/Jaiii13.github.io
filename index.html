<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Vasava Translations</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
  :root{
    --bg:#000; --panel:#111; --text:#fff; --muted:#9aaeb0;
    --accent:#28c76f; --radius:10px;
  }
  [data-theme="light"]{
    --bg:#fff; --panel:#f9f9f9; --text:#000; --muted:#555;
    --accent:#28c76f;
  }
  html,body{height:100%;margin:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial}
  .wrap{max-width:800px;margin:34px auto;padding:22px}
  .card{background:var(--panel);border-radius:var(--radius);padding:18px;border:1px solid rgba(255,255,255,0.05)}
  header{display:flex;align-items:center;justify-content:space-between;gap:12px}
  h1{margin:0;font-size:1.3rem;letter-spacing:0.6px}
  .controls{display:flex;gap:8px;align-items:center}
  .btn{background:transparent;border:1px solid var(--muted);padding:6px 10px;border-radius:6px;color:var(--text);cursor:pointer;font-size:0.9rem}
  .hero{margin-top:14px;padding:14px;border-radius:8px;background:rgba(40,199,111,0.08)}
  .note{color:var(--muted);margin-top:6px;font-size:0.95rem}
  .collections{margin-top:16px}
  .collection{border:1px solid rgba(255,255,255,0.08);border-radius:8px}
  .coll-head{padding:8px 10px;cursor:pointer;font-weight:600;background:transparent;color:var(--accent);font-size:0.95rem}
  .coll-list{margin:0;display:grid;grid-template-columns:repeat(auto-fill,minmax(100px,1fr));gap:6px;max-height:0;overflow:hidden;opacity:0;transition:max-height .3s, opacity .2s;padding:0 8px}
  .coll-list.open{max-height:500px;opacity:1;padding:8px}
  a.link{display:block;padding:6px;border-radius:6px;text-decoration:none;text-align:center;border:1px solid rgba(255,255,255,0.08);color:var(--text);font-size:0.9rem}
  a.link:hover{border-color:var(--accent)}
  .actions{margin-top:14px}
  input[type=number]{background:transparent;border:1px solid var(--muted);padding:6px 8px;border-radius:6px;color:var(--text);width:120px}
</style>
</head>
<body>
  <div class="wrap">
    <section class="card" aria-labelledby="site-title">
      <header>
        <h1 id="site-title">Vasava Translations</h1>
        <div class="controls">
          <button id="themeToggle" class="btn" aria-pressed="false">Toggle</button>
        </div>
      </header>

      <div class="hero">
        <strong style="color:var(--accent)">All chapters are free. Repo is public.</strong>
        <div class="note">I update chapters as I read them. If you value the work consider donating. Thank you.</div>
      </div>

      <div class="collections" id="collections"></div>

      <div class="actions">
        <input id="jump" type="number" min="1" placeholder="Chapter #">
        <button id="jumpBtn" class="btn">Open</button>
      </div>
    </section>
  </div>

<script>
/* collection config */
const collections = [
  { id:'ofpv', title:'OFPV', from:490, to:586 }
];

/* render */
const container = document.getElementById('collections');
collections.forEach(col=>{
  const block=document.createElement('div');
  block.className='collection';
  block.innerHTML=`<div class="coll-head">${col.title}</div><div class="coll-list" id="list-${col.id}" aria-hidden="true"></div>`;
  container.appendChild(block);

  const list=block.querySelector('.coll-list');
  for(let i=col.from;i<=col.to;i++){
    const a=document.createElement('a');
    a.className='link'; a.href=`chapters/reader.html?n=${i}`; a.textContent=`Ch ${i}`;
    list.appendChild(a);
  }

  block.querySelector('.coll-head').addEventListener('click',()=>{
    list.classList.toggle('open');
    list.setAttribute('aria-hidden', !list.classList.contains('open'));
  });
});

/* theme toggle */
const root=document.documentElement;
const stored=localStorage.getItem('vasava-theme');
root.setAttribute('data-theme', stored || 'dark');
const btn=document.getElementById('themeToggle');
function updateBtn(){ btn.textContent = root.getAttribute('data-theme')==='light'?'Dark':'Light'; }
btn.addEventListener('click',()=>{
  const next=root.getAttribute('data-theme')==='light'?'dark':'light';
  root.setAttribute('data-theme',next);
  localStorage.setItem('vasava-theme',next);
  updateBtn();
});
updateBtn();

/* jump */
document.getElementById('jumpBtn').addEventListener('click',()=>{
  const n=Number(document.getElementById('jump').value);
  if(!n) return alert('Enter chapter number');
  location.href=`chapters/reader.html?n=${n}`;
});
</script>
</body>
</html>
